{% extends "dashboard/layout.html" %}

{% block title %}Dashboard - MIS â†” QBO{% endblock %}
{% block page_title %}Dashboard{% endblock %}

{% block content %}
<!-- Sync Entity Cards -->
<div class="grid grid-cols-1 md:grid-cols-5 gap-6">
  <!-- Applicants -->
  <div class="bg-white rounded-2xl shadow p-6 flex items-center space-x-4">
    <div class="p-3 rounded-xl bg-indigo-50">
      <i class="fi-rr-student-alt text-indigo-600 text-2xl"></i>
    </div>
    <div>
      <p class="text-gray-500 text-sm">Applicants</p>
      <h2 class="text-2xl font-bold text-indigo-600">{{ numbers['total_applicants'] }}</h2>
      <p class="text-xs text-gray-400">Synced: {{ numbers['synced_applicants'] if numbers['synced_applicants'] is not none else 0 }}</p>
    </div>
  </div>

  <!-- Students -->
  <div class="bg-white rounded-2xl shadow p-6 flex items-center space-x-4">
    <div class="p-3 rounded-xl bg-green-50">
      <i class="fi fi-rr-student text-green-600 text-2xl"></i>
    </div>
    <div>
      <p class="text-gray-500 text-sm">Students</p>
      <h2 class="text-2xl font-bold text-green-600">{{ numbers['total_students'] }}</h2>
      <p class="text-xs text-gray-400">Synced: {{ numbers['synced_students'] if numbers['synced_students'] is not none else 0 }}</p>
    </div>
  </div>

  <!-- Invoices -->
  <div class="bg-white rounded-2xl shadow p-6 flex items-center space-x-4">
    <div class="p-3 rounded-xl bg-yellow-50">
      <i class="fi fi-rr-point-of-sale-bill text-yellow-600 text-2xl"></i>
    </div>
    <div>
      <p class="text-gray-500 text-sm">Invoices</p>
      <h2 class="text-2xl font-bold text-yellow-600">{{ numbers['total_invoices'] }}</h2>
      <p class="text-xs text-gray-400">Synced: {{ numbers['synced_invoices'] if numbers['synced_invoices'] is not none else 0 }}</p>
    </div>
  </div>

  <!-- Payments -->
  <div class="bg-white rounded-2xl shadow p-6 flex items-center space-x-4">
    <div class="p-3 rounded-xl bg-red-50">
      <i class="fi fi-ss-coins text-red-600 text-2xl"></i>
    </div>
    <div>
      <p class="text-gray-500 text-sm">Payments</p>
      <h2 class="text-2xl font-bold text-red-600">{{ numbers['total_payments'] }}</h2>
      <p class="text-xs text-gray-400">Synced: {{ numbers['synced_payments'] if numbers['synced_payments'] is not none else 0 }}</p>
    </div>
  </div>

  <!-- Items -->
  <div class="bg-white rounded-2xl shadow p-6 flex items-center space-x-4">
    <div class="p-3 rounded-xl bg-purple-50">
      <i class="fi fi-rr-dolly-flatbed text-purple-600 text-2xl"></i>
    </div>
    <div>
      <p class="text-gray-500 text-sm">Items (Fees)</p>
      <h2 class="text-2xl font-bold text-purple-600">{{ numbers['active_categories'] }}</h2>
      <p class="text-xs text-gray-400">Synced: {{ numbers['synced_categories'] if numbers['synced_categories'] is not none else 0 }}</p>
    </div>
  </div>
</div>


<!-- Sync History Chart -->
<div class="bg-white rounded-2xl shadow p-6 mt-6">
  <h3 class="font-semibold text-gray-800 mb-4">Sync History</h3>
  <canvas id="syncHistoryChart" height="100"></canvas>
</div>

<!-- Sync Queue Status -->
<div class="bg-white rounded-2xl shadow p-6 mt-6">
  <h3 class="font-semibold text-gray-800 mb-4">Sync Queue Status</h3>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <div class="flex items-center p-4 bg-indigo-50 rounded-xl">
      <div class="p-3 rounded-full bg-indigo-100">
        <i class="fi fi-rr-time-quarter-to text-indigo-600 text-xl"></i>
      </div>
      <div class="ml-4">
        <p class="text-gray-500">Queued</p>
        <h2 class="text-xl font-bold text-indigo-600">45</h2>
      </div>
    </div>
    <div class="flex items-center p-4 bg-yellow-50 rounded-xl">
      <div class="p-3 rounded-full bg-yellow-100">
        <i class="fi fi-rr-refresh text-yellow-600 text-xl animate-spin"></i>
      </div>
      <div class="ml-4">
        <p class="text-gray-500">In Progress</p>
        <h2 class="text-xl font-bold text-yellow-600">12</h2>
      </div>
    </div>
    <div class="flex items-center p-4 bg-red-50 rounded-xl">
      <div class="p-3 rounded-full bg-red-100">
        <i class="fi fi-rr-undo text-red-600 text-xl"></i>
      </div>
      <div class="ml-4">
        <p class="text-gray-500">Retried</p>
        <h2 class="text-xl font-bold text-red-600">6</h2>
      </div>
    </div>
  </div>
</div>

<!-- Transactions Table -->
<div class="bg-white rounded-2xl shadow overflow-hidden mt-6">
  <div class="p-4 border-b flex justify-between items-center">
    <h3 class="font-semibold text-gray-800">Recent Transactions</h3>
    <button class="px-4 py-2 text-sm bg-indigo-600 text-white rounded-xl hover:bg-indigo-700">
      Sync Now
    </button>
  </div>
  <table class="w-full text-left border-collapse">
    <thead class="bg-gray-100">
      <tr>
        <th class="p-4 border-b">#</th>
        <th class="p-4 border-b">Type</th>
        <th class="p-4 border-b">Entity</th>
        <th class="p-4 border-b">Status</th>
        <th class="p-4 border-b">Date</th>
      </tr>
    </thead>
    <tbody>
      <tr class="hover:bg-gray-50">
        <td class="p-4 border-b">1</td>
        <td class="p-4 border-b">Invoice</td>
        <td class="p-4 border-b">INV-1001</td>
        <td class="p-4 border-b"><span class="text-green-600 font-semibold">Synced</span></td>
        <td class="p-4 border-b">2024-10-01</td>
      </tr>
      <tr class="hover:bg-gray-50">
        <td class="p-4 border-b">2</td> 
        <td class="p-4 border-b">Invoice</td>
        <td class="p-4 border-b">INV-1002</td>
        <td class="p-4 border-b"><span class="text-yellow-600 font-semibold">Pending</span></td>
        <td class="p-4 border-b">2024-10-02</td>
      </tr>
    </tbody>
  </table>
</div>
{% endblock %}
